<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jeecg.modules.demo.nl_employee_assess_management.nl_employee_review.mapper.NlEmployeeReviewMapper">
    <update id="updateByInfoId">
        update nl_employee_review
        set review_result=#{reviewResult},
            review_msg=#{reviewMsg}
        where info_id = #{infoId}
    </update>
    <select id="getEmployeeReviewWithName"
            resultType="org.jeecg.modules.demo.nl_employee_assess_management.nl_employee_review.vo.NlReviewVO">
        select review.id,review.info_id,review.review_result,review.review_type,user.realname
        from nl_employee_review as review,
        nl_employee_info as info,
        sys_user as user
        where review.info_id=info.id
        and info.employee_id=user.id
        <if test="params.reviewResult!=null and params.reviewResult!='' ">
            and review.review_result=#{params.reviewResult}
        </if>
        <if test="params.name!=null and params.name!=''">
            and user.realname=#{params.realname}
        </if>
    </select>
</mapper>